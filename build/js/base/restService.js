define(["baseService"],function(t){t.factory("restservice",["$rootScope","$location","$q","$http","ENV","authservice","$log",function(t,e,o,n,i,r,c){function l(t,e){this.url="",this.params=null,this.timeout=5e3,this.isRequestNeedCheckLoginState=!0,Horse.validate.isFunction(t)&&Horse.util.extend(t.prototype,l.prototype)}return l.prototype={get:function(){var t=o.defer(),e=t.promise;return this.isRequestNeedCheckLoginState&&!r.checkAuthSync()?(Horse.alert.init({title:"登录失败",content:"您目前为非登陆状态，请登录~",callback:function(){window.location.href=i._loginurl+"?from="+encodeURIComponent(window.location.href)},cancelCallBack:function(){window.location.href=i._loginurl+"?from="+encodeURIComponent(window.location.href)}}),e):Horse.validate.isNull(this.url)?(c.warn("xhr:url can not be empty !!"),e):(n({method:"GET",url:this.url,params:this.params,timeout:this.timeout}).then(function(e,o,n,i){t.resolve(e)}).then(function(e,o,n,i){t.reject(e)}),e)},post:function(){var t=o.defer(),e=t.promise;return this.isRequestNeedCheckLoginState&&!r.checkAuthSync()?(Horse.alert.init({title:"登录失败",content:"您目前为非登陆状态，请登录~",callback:function(){window.location.href=i._loginurl+"?from="+encodeURIComponent(window.location.href)},cancelCallBack:function(){window.location.href=i._loginurl+"?from="+encodeURIComponent(window.location.href)}}),e):Horse.validate.isNull(this.url)?(c.warn("xhr:url can not be empty !!"),e):(n({method:"POST",url:this.url,params:this.params,timeout:this.timeout}).then(function(e,o,n,i){t.resolve(e)}).then(function(e,o,n,i){t.reject(e)}),e)}},l}])});