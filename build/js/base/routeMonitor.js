define(["baseRoute","basePageOp"],function(e,n){e.run(["$rootScope","$state","$location","$log","authservice","ENV",function(e,t,o,r,a,i){var u={judgeCurrentPageNeedLoginState:function(){for(var e=0;e<i._noNeedToCheckLoginState.length;e++){var n=i._noNeedToCheckLoginState[e];if(o.absUrl().toLowerCase().indexOf(n.pageName)>=0)return!0}return!1}};e.$on("$stateChangeError",function(e,n,t,o,a,i){r.error("An error occurred while changing states: "+i),r.debug("event",e),r.debug("toState",n),r.debug("toParams",t),r.debug("fromState",o),r.debug("fromParams",a)}),e.$on("$stateChangeStart",function(e,n,t){if(u.judgeCurrentPageNeedLoginState())return void r.info("current page don`t need login !! ");a.checkAuth(e,function(n){if(n){if(o.absUrl().toLowerCase().indexOf("login")>=0)return e.preventDefault(),void(window.location.href="../#/index")}else r.info("Missing login state !!"),o.absUrl().toLowerCase().indexOf("login")>=0||(e.preventDefault(),window.location.href=i._loginurl+"?from="+encodeURIComponent(window.location.href))})}),e.$on("$stateChangeSuccess",function(t,r,a,i,u){n.initEvent(e,o)}),e.$on("$stateNotFound",function(e,n,t,o){r.error("The request state was not found: "+n)})}])});